<!-- src/views/SettingsPrivacy.vue -->
<template>
    <div class="settings-privacy">
        <h3>üëÅÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h3>
        <div class="privacy-form">
            <div class="privacy-group">
                <h4>–ö—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å:</h4>
                <div class="privacy-item">
                    <label>–ü—Ä–æ—Ñ–∏–ª—å:</label>
                    <select v-model="profileVisibility">
                        <option value="public">–í—Å–µ</option>
                        <option value="friends">–¢–æ–ª—å–∫–æ –¥—Ä—É–∑—å—è</option>
                        <option value="private">–¢–æ–ª—å–∫–æ —è</option>
                    </select>
                </div>
                <div class="privacy-item">
                    <label>–ü–æ—á—Ç—É:</label>
                    <select v-model="emailVisibility">
                        <option value="friends">–¢–æ–ª—å–∫–æ –¥—Ä—É–∑—å—è</option>
                        <option value="private">–¢–æ–ª—å–∫–æ —è</option>
                    </select>
                </div>
                <div class="privacy-item">
                    <label>–î–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                    <select v-model="birthdayVisibility">
                        <option value="friends">–¢–æ–ª—å–∫–æ –¥—Ä—É–∑—å—è</option>
                        <option value="private">–¢–æ–ª—å–∫–æ —è</option>
                    </select>
                </div>
            </div>
            <div class="privacy-group">
                <h4>–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞:</h4>
                <div class="privacy-item checkbox">
                    <label>
                        <input type="checkbox" v-model="tagReview">
                        –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–≥–æ–≤ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
                    </label>
                </div>
                <div class="privacy-item checkbox">
                    <label>
                        <input type="checkbox" v-model="locationTracking">
                        –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
                    </label>
                </div>
                <div class="privacy-item checkbox">
                    <label>
                        <input type="checkbox" v-model="dataCollection">
                        –°–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                    </label>
                </div>
            </div>
            <div class="privacy-group">
                <h4>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:</h4>
                <div class="blocked-users">
                    <p>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: {{ blockedUsers.length }}</p>
                    <div v-if="blockedUsers.length" class="blocked-list">
                        <div v-for="user in blockedUsers" :key="user.id" class="blocked-user">
                            <span>{{ user.name }}</span>
                            <button @click="unblockUser(user.id)" class="unblock-btn">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                    <p v-else>–ù–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                </div>
            </div>
            <button @click="savePrivacySettings" class="save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
    </div>
</template>

<script>
import { ref } from 'vue'

export default {
    name: 'SettingsPrivacy',
    setup() {
        const profileVisibility = ref('friends')
        const emailVisibility = ref('friends')
        const birthdayVisibility = ref('private')
        const tagReview = ref(true)
        const locationTracking = ref(false)
        const dataCollection = ref(true)
        
        const blockedUsers = ref([
            { id: 1, name: '–°–ø–∞–º-–∞–∫–∫–∞—É–Ω—Ç' },
            { id: 2, name: '–ù–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }
        ])

        const savePrivacySettings = () => {
            alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!')
            console.log({
                profileVisibility: profileVisibility.value,
                emailVisibility: emailVisibility.value,
                birthdayVisibility: birthdayVisibility.value,
                tagReview: tagReview.value,
                locationTracking: locationTracking.value,
                dataCollection: dataCollection.value,
                blockedUsers: blockedUsers.value
            })
        }

        const unblockUser = (userId) => {
            const user = blockedUsers.value.find(u => u.id === userId)
            if (user && confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${user.name}?`)) {
                blockedUsers.value = blockedUsers.value.filter(u => u.id !== userId)
                alert(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${user.name} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω`)
            }
        }

        return {
            profileVisibility,
            emailVisibility,
            birthdayVisibility,
            tagReview,
            locationTracking,
            dataCollection,
            blockedUsers,
            savePrivacySettings,
            unblockUser
        }
    }
}
</script>

<style scoped>
.settings-privacy {
    padding: 20px;
}

.privacy-form {
    max-width: 600px;
}

.privacy-group {
    margin-bottom: 30px;
    padding: 20px;
    background-color: #f8f9fa;
    border-radius: 8px;
}

.privacy-group h4 {
    margin-top: 0;
    margin-bottom: 20px;
    color: #2d3748;
    border-bottom: 2px solid #e2e8f0;
    padding-bottom: 10px;
}

.privacy-item {
    margin-bottom: 15px;
}

.privacy-item label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #4a5568;
}

.privacy-item select {
    width: 100%;
    padding: 8px;
    border: 2px solid #e2e8f0;
    border-radius: 6px;
    font-size: 14px;
}

.privacy-item.checkbox label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: normal;
    cursor: pointer;
}

.privacy-item.checkbox input[type="checkbox"] {
    width: auto;
}

.blocked-users {
    margin-top: 20px;
}

.blocked-list {
    margin-top: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.blocked-user {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: white;
    border: 1px solid #fed7d7;
    border-radius: 6px;
}

.unblock-btn {
    padding: 5px 10px;
    background-color: #48bb78;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.unblock-btn:hover {
    background-color: #38a169;
}
</style>